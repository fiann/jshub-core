"use strict";(function(){var c=window,b,a=function(){var k={},f=[],i=[],g={},l=function(m,n){this.token=m;this.callback=n;},e=function(m,o,n){this.type=m;this.timestamp=n||b.safe.getTimestamp();this.data=o;},j=function(){var m=function(p,r){p=p.split(",");for(var q=0;q<p.length;q++){if(r===b.util.trim(p[q])){return true;}}return false;},o=function(p,r){var q=b.util.trim(r.event_visibility);if(q===undefined||q===""||q==="*"){return true;}return m(q,p);},n=function(q,r){var p={};b.util.each(r,function(u,t){if(/_visibility$/.test(t)===false){var s=r[t+"_visibility"];if(typeof s!=="string"||s===""||s==="*"||m(s,q)){p[t]=u;}}});return p;};this.dispatch=function(q,v,u,t){var p,s,r;if(o(v.token,u)){s=n(v.token,u);p=new e(q,s,t);r=v.callback(p);if(r){b.util.merge(u,r);}}};},h=new j();this.bind=function(m,o,r){var q=k[m],p,n;if("undefined"===typeof q){q=[];}for(p=false,n=0;n<q.length;n++){if(q[n].token===o){q[n].callback=r;p=true;break;}}if(!p){q.push(new l(o,r));}k[m]=q;};this.trigger=function(t,s,u){s=s||{};var v=new e(t,s,u);i.push(v);var o=(k[t]||[]);var w,n,m=(k["*"]||[]),r,q;for(r=0;r<m.length;r++){n=m[r];w=false;for(q=0;q<o.length;q++){if(o[q].token===n.token){w=true;}}if(!w){o.push(n);}}for(var p=0;p<o.length;p++){h.dispatch(t,o[p],s,u);}if(t==="plugin-initialization-start"){f.push(s);if(g[s.id]){this.configure(s.id,g[s.id]);}}return s;};this.cachedEvents=function(){var q=[],o;for(o=0;o<i.length;o++){var n=i[o],m={};m.type=n.type;m.timestamp=n.timestamp;m.data={};for(var p in n.data){if(typeof n.data[p]==="string"||typeof n.data[p]==="number"){m.data[p]=n.data[p];}}q.push(m);}return q;};this.getPluginInfo=function(){var q=[],m;for(m=0;m<f.length;m++){var n=f[m],p={};for(var o in n){if(typeof n[o]==="string"||typeof n[o]==="number"){p[o]=n[o];}}q.push(p);}return q;};this.configure=function(t,q){if(typeof t!=="string"){throw new Error("Invalid configuration key");}var p,u,r,v=t.split("."),n=typeof q;u=function(){var w,x=v.slice(1,v.length).join(".");for(w=0;w<f.length;w++){if(p===f[w].id&&typeof f[w].configure==="function"){f[w].configure(x,q);return;}}};p=v[0];r=v[v.length-1];for(var s=g,o=0;o<v.length-1;o++){s[v[o]]=s[v[o]]||{};s=s[v[o]];}if(n==="string"||n==="number"||n==="boolean"){s[r]=q;u();}else{if(q===null){delete s[r];u();}else{if(n==="object"){for(var m in q){if(q.hasOwnProperty(m)){this.configure(t+"."+m,q[m]);}}}else{return s[r];}}}};};b=c.jsHub=new a();b.safe=function(f){var e;if("document"===f){e={location:{hash:document.location.hash,host:document.location.host,hostname:document.location.hostname,href:document.location.href,pathname:document.location.pathname,port:document.location.port,protocol:document.location.protocol,search:document.location.search},title:document.title,referrer:(document.referrer===null)?"":document.referrer,cookies:document.cookies,domain:"Unsafe property"};}else{e={};}return e;};b.safe.getTimestamp=function(){return new Date().getTime();};var d=function(){var e=this;e.trim=function(f){if(typeof f==="string"){f=f.replace(/(&nbsp;|\s)+/g," ").replace(/(^\s+)|(\s+$)/g,"");}return f;};e.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]";};e.each=function(g,k){if(e.isArray(g)){for(var j=0,f=g.length;j<f;j++){k.call(b,g[j],j);}}else{if(typeof g==="object"){for(var h in g){if(g.hasOwnProperty(h)){k.call(b,g[h],h);}}}}return g;};e.merge=function(f,h){f=f||{};h=h||{};for(var g in h){if(h.hasOwnProperty(g)){f[g]=h[g];}}return f;};};b.util=new d();})();