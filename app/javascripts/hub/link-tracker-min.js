"use strict";(function(){var f={name:"Link tracker plugin",id:"links",version:0.1,vendor:"jsHub.org",type:"data-capture"},b=this,e=b.document,j="click",i=false,a=null,c=false,g=null;jsHub.trigger("plugin-initialization-start",f);f.configure=function(o,p){var n,k,l,m;if(o==="downloadLinkTypes"){if(p===""){i=false;}else{n=p.split(/[,|\s]+/).join("|\\.");i=true;a=new RegExp("\\."+n+"$");}}else{if(o==="internalDomains"){if(p===""){c=false;}else{k=p.split(/[,|\s]+/).join("|\\.").replace("*",".*");c=true;g=new RegExp("^"+k+"$");}}}};f.configure("downloadLinkTypes","avi,doc,docx,exe,m4v,mov,mp3,mp4,mpg,pdf,wav,wmv,xls,xlsx,zip,zxp");f.configure("internalDomains",b.location.host);var h=function(){var l=this,m=l.target,n,k=null,o=(m!==""&&m!=="_self"&&m!==b.name);if(c&&!g.test(l.hostname)){k="site-exit";}else{if(i&&a.test(l.pathname)){k="download";}}if(k!==null&&!o){n=setTimeout(function(){b.location.href=l.href;},500);}if(k!==null){jsHub.trigger(k,{node:l,url:l.href,timeoutId:n});}return o;};f.eventHandler=function d(m){var k=e.getElementsByTagName("a"),l;for(l=0;l<k.length;l++){if(k[l].addEventListener){k[l].addEventListener(j,h,false);}else{if(k[l].attachEvent){k[l].attachEvent("on"+j,h);}}}return null;};jsHub.bind("data-capture-start",f);jsHub.trigger("plugin-initialization-complete",f);})();