"use strict";(function(){var f={name:"Link tracker plugin",id:"link-tracker",version:0.1,vendor:"jsHub.org",type:"data-capture"},b=this,e=b.document,j="click",i=false,a=null,c=false,g=null;jsHub.trigger("plugin-initialization-start",f);f.configure=function(k,l){if(k==="downloadLinkTypes"){if(l===""){i=false;}else{i=true;l="\\."+l.split(/[,|\s]+?/).join("|\\.")+"$";a=new RegExp(l.replace(/\.+/,"."));}}else{if(k==="internalDomains"){l=l.split(/[,|\s]+/).join("|\\.").replace("*",".*");g=new RegExp("^"+l+"$");}else{if(k==="trackExternalLinks"){c=(l==="true");}}}};var h=function(){var l=this,m=l.target,n,k=null,o=(m!==""&&m!=="_self"&&m!==b.name);if(c&&l.hostname!==b.location.hostname&&(!g||!g.test(l.hostname))){k="site-exit";}else{if(i&&a.test(l.pathname)){k="download";}}if(k!==null&&!o){n=setTimeout(function(){b.location.href=l.href;},500);}if(k!==null){jsHub.trigger(k,{node:l,url:l.href,timeoutId:n});}return o;};f.eventHandler=function d(m){var k=e.getElementsByTagName("a"),l;for(l=0;l<k.length;l++){if(k[l].addEventListener){k[l].addEventListener(j,h,false);}else{if(k[l].attachEvent){k[l].attachEvent("on"+j,h);}}}return null;};jsHub.bind("data-capture-start",f);jsHub.trigger("plugin-initialization-complete",f);})();